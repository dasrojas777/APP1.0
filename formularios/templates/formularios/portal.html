{% extends 'frontend/base.html' %}
{% block title %}Editor de Formularios{% endblock %}
{% block content %}
<div class="pt-2 pb-3 w-100">
	<div class="seccion-formularios-creados mb-4 w-100">
		<h2 class="mb-3">Tus formularios creados</h2>
	<div class="card w-100 shadow-sm bg-light border border-1 border-secondary-subtle">
			<div class="card-body p-4">
				<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4 w-100 mx-0">
					{% if formularios %}
						{% for formulario in formularios %}
						<div class="col d-flex align-items-stretch">
							<div class="card h-100 w-100 border-primary bg-primary bg-opacity-10 d-flex flex-column justify-content-between">
								<div class="card-body d-flex flex-column justify-content-center align-items-center flex-grow-1" style="min-height: 120px;">
									<h5 class="card-title text-center w-100 text-primary">{{ formulario.nombre }}</h5>
									{% if formulario.archivo %}
										<a href="{{ formulario.archivo.url }}" class="btn btn-outline-success btn-sm mt-2 w-100" download>
											<i class="bi bi-file-earmark-arrow-down"></i> Descargar archivo
										</a>
									{% else %}
										<span class="text-muted">Sin archivo</span>
									{% endif %}
								</div>
								<div class="card-footer bg-transparent border-0 d-flex justify-content-center align-items-center">
									<form method="post" action="{% url 'eliminar_formulario' formulario.id %}" class="w-100">
										{% csrf_token %}
										<button type="submit" class="btn btn-outline-danger btn-sm w-100" onclick="return confirm('¿Seguro que deseas eliminar este formulario?');">
											<i class="bi bi-trash"></i> Eliminar
										</button>
									</form>
								</div>
							</div>
						</div>
						{% endfor %}
					{% else %}
						<div class="d-flex w-100 justify-content-center align-items-center" style="min-height: 180px; height: 18vh;">
							<span class="text-muted text-center w-100">Aún no has creado formularios</span>
						</div>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
	<div class="seccion-crear-nuevo mb-2 w-100">
		<h3 class="mb-3">Crear nuevo formulario</h3>
		<a href="{% url 'subir_formulario' %}" class="btn btn-primary d-flex align-items-center" title="Añadir nuevo formulario">
			<i class="bi bi-plus-circle me-1"></i> Nuevo
		</a>
	</div>
</div>
{% endblock %}
