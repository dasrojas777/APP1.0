{% extends 'frontend/base.html' %}
{% block title %}Editor de Formularios{% endblock %}
{% block content %}
<div class="container pt-2 pb-3">
	<div class="mb-4">
		<h2 class="mb-3">Tus formularios creados</h2>
		<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4">
			{% if formularios %}
				{% for formulario in formularios %}
				<div class="col">
					<div class="card h-100 border-primary">
						<div class="card-body d-flex flex-column justify-content-center align-items-center" style="min-height: 120px;">
							<h5 class="card-title">{{ formulario.nombre }}</h5>
							{% if formulario.archivo %}
								<a href="{{ formulario.archivo.url }}" class="btn btn-outline-success btn-sm mt-2" download>
									<i class="bi bi-file-earmark-arrow-down"></i> Descargar archivo
								</a>
							{% else %}
								<span class="text-muted">Sin archivo</span>
							{% endif %}
							<form method="post" action="{% url 'eliminar_formulario' formulario.id %}" class="mt-2">
								{% csrf_token %}
								<button type="submit" class="btn btn-outline-danger btn-sm" onclick="return confirm('¿Seguro que deseas eliminar este formulario?');">
									<i class="bi bi-trash"></i> Eliminar
								</button>
							</form>
						</div>
					</div>
				</div>
				{% endfor %}
			{% else %}
				<div class="col">
					<div class="card h-100 border-secondary text-center bg-light">
						<div class="card-body d-flex flex-column justify-content-center align-items-center" style="min-height: 120px;">
							<span class="text-muted">Aún no has creado formularios</span>
						</div>
					</div>
				</div>
			{% endif %}
		</div>
	</div>
	<div class="mb-2">
		<h3 class="mb-3">Crear nuevo formulario</h3>
		<a href="{% url 'subir_formulario' %}" class="btn btn-primary d-flex align-items-center" title="Añadir nuevo formulario">
			<i class="bi bi-plus-circle me-1"></i> Nuevo
		</a>
	</div>
</div>
{% endblock %}
